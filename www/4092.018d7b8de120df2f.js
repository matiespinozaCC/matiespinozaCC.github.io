"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4092],{4092:(M,u,r)=>{r.r(u),r.d(u,{PostDetailPageModule:()=>j});var p=r(177),d=r(4341),n=r(4742),l=r(70),g=r(467),e=r(4438),h=r(8189),P=r(4563);function v(o,c){if(1&o&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&o){const i=e.XpG(2);e.R7$(),e.JRh(i.reservaMensaje)}}function F(o,c){if(1&o){const i=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s()(),e.j41(4,"ion-card-content")(5,"p"),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9),e.k0s()(),e.j41(10,"p"),e.EFF(11),e.k0s(),e.j41(12,"p"),e.EFF(13),e.k0s(),e.j41(14,"ion-item")(15,"ion-label"),e.EFF(16,"Fecha de inicio"),e.k0s(),e.j41(17,"ion-datetime",4),e.mxI("ngModelChange",function(a){e.eBV(i);const s=e.XpG();return e.DH7(s.fechaInicio,a)||(s.fechaInicio=a),e.Njj(a)}),e.k0s()(),e.j41(18,"ion-item")(19,"ion-label"),e.EFF(20,"Fecha de fin"),e.k0s(),e.j41(21,"ion-datetime",4),e.mxI("ngModelChange",function(a){e.eBV(i);const s=e.XpG();return e.DH7(s.fechaFin,a)||(s.fechaFin=a),e.Njj(a)}),e.k0s()(),e.j41(22,"ion-button",5),e.bIt("click",function(){e.eBV(i);const a=e.XpG();return e.Njj(a.reservar())}),e.EFF(23,"Reservar"),e.k0s(),e.DNE(24,v,2,1,"div",3),e.k0s()()}if(2&o){const i=e.XpG();e.R7$(3),e.JRh(i.post.title),e.R7$(3),e.JRh(i.post.description),e.R7$(3),e.SpI("Publicado por: ",i.post.author,""),e.R7$(2),e.SpI("Fecha de publicaci\xf3n: ",i.post.createdAt.toDate().toLocaleString(),""),e.R7$(2),e.SpI("Categor\xeda: ",i.post.category,""),e.R7$(4),e.R50("ngModel",i.fechaInicio),e.R7$(4),e.R50("ngModel",i.fechaFin),e.R7$(3),e.Y8G("ngIf",i.reservaMensaje)}}const D=[{path:"",component:(()=>{var o;class c{constructor(t,a,s,f){this.route=t,this.postService=a,this.router=s,this.authService=f,this.loading=!0,this.reservaMensaje=""}ngOnInit(){var t=this;return(0,g.A)(function*(){const a=t.route.snapshot.paramMap.get("id");if(a)try{t.post=yield t.postService.getPostById(a)}catch(s){console.error("Error al obtener el post:",s)}finally{t.loading=!1}else console.error("El postId es null o inv\xe1lido"),t.loading=!1})()}reservar(){var t=this;return(0,g.A)(function*(){if(!t.fechaInicio||!t.fechaFin)return void(t.reservaMensaje="Por favor, selecciona ambas fechas.");const a=yield t.authService.getCurrentUser();if(!a)return void(t.reservaMensaje="Usuario no autenticado. Por favor, inicia sesi\xf3n.");const s=t.post.id;(yield t.postService.verificarDisponibilidad(s,new Date(t.fechaInicio),new Date(t.fechaFin)))?(yield t.postService.reservarPropiedad(s,new Date(t.fechaInicio),new Date(t.fechaFin),a.uid),t.reservaMensaje="Reserva realizada con \xe9xito."):t.reservaMensaje="Las fechas seleccionadas no est\xe1n disponibles."})()}onBack(){this.router.navigate(["/home"])}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(l.nX),e.rXU(h.K),e.rXU(l.Ix),e.rXU(P.u))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-post-detail"]],decls:10,vars:2,consts:[["slot","start"],[3,"click"],["name","arrow-back"],[4,"ngIf"],["displayFormat","YYYY-MM-DD",3,"ngModelChange","ngModel"],["expand","full",3,"click"]],template:function(t,a){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return a.onBack()}),e.nrm(4,"ion-icon",2),e.EFF(5," Volver "),e.k0s()(),e.j41(6,"ion-title"),e.EFF(7),e.k0s()()(),e.j41(8,"ion-content"),e.DNE(9,F,25,8,"ion-card",3),e.k0s()),2&t&&(e.R7$(7),e.JRh(null==a.post?null:a.post.title),e.R7$(2),e.Y8G("ngIf",a.post))},dependencies:[p.bT,d.BC,d.vS,n.Jm,n.QW,n.b_,n.I9,n.ME,n.tN,n.W9,n.A9,n.eU,n.iq,n.uz,n.he,n.BC,n.ai,n.Je]}),c})()}];let m=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[l.iI.forChild(D),l.iI]}),c})(),j=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,d.YN,n.bv,m]}),c})()}}]);